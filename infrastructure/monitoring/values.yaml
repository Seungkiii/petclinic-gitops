loki:
  deploymentMode: SingleBinary

  singleBinary:
    replicas: 1
    persistence:
      enabled: true
      storageClass: gp2   
      size: 10Gi

  read:
    replicas: 0
  write:
    replicas: 0
  backend:
    replicas: 0

  serviceAccount:
    create: false
    name: "loki-sa"

  loki:
    auth_enabled: false
    
    commonConfig:
      replication_factor: 1

    storage:
      type: 's3'
      bucketNames:
        chunks: "petclinic-loki-storage-20251229" 
        ruler:  "petclinic-loki-storage-20251229"
        admin:  "petclinic-loki-storage-20251229"
      s3:
        region: ap-northeast-2
        s3ForcePathStyle: false
    
    schemaConfig:
      configs:
        - from: 2024-01-01
          store: tsdb
          object_store: s3
          schema: v13
          index:
            prefix: index_
            period: 24h

promtail:
  config:
    clients:
      - url: http://monitoring-loki.monitoring.svc.cluster.local:3100/loki/api/v1/push


tempo:
  receivers:
      zipkin:
        protocols:
          http:
            endpoint: 0.0.0.0:9411
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
          http:
            endpoint: 0.0.0.0:4318
      jaeger:
        protocols:
          thrift_http:
            endpoint: 0.0.0.0:14268
          grpc:
            endpoint: 0.0.0.0:14250â‚©
  storage:
    trace:
      backend: local
      local:
        path: /var/tempo/traces
  
  persistentVolume:
    enabled: true
    storageClassName: gp2
    size: 10Gi
  
  service:
    type: ClusterIP
    ports:
    - name: zipkin
      port: 9411
      protocol: TCP
      targetPort: 9411
    - name: otlp-grpc
      port: 4317
      protocol: TCP
      targetPort: 4317
    - name: otlp-http
      port: 4318
      protocol: TCP
      targetPort: 4318
  serviceMonitor:
    enabled: true

