loki:
  deploymentMode: SingleBinary
  
  singleBinary:
    replicas: 1
    persistence:
      enabled: true
      storageClass: gp2   
      size: 10Gi        

  serviceAccount:
    create: false
    name: "loki-sa"       

  loki:
    auth_enabled: false
    
    commonConfig:
      replication_factor: 1

    storage:
      type: 's3'
      bucketNames:
        chunks: "petclinic-loki-storage-20251229" 
        ruler:  "petclinic-loki-storage-20251229"
        admin:  "petclinic-loki-storage-20251229"
      s3:
        region: ap-northeast-2
        endpoint: https://s3.ap-northeast-2.amazonaws.com
    
    schemaConfig:
      configs:
        - from: 2024-01-01
          store: tsdb
          object_store: s3
          schema: v13
          index:
            prefix: index_
            period: 24h

promtail:
  config:
    clients:
      # Loki Gateway 서비스 주소 (namespace 주의: monitoring인지 argocd인지 확인 필요)
      # 현재 로그상 argocd 네임스페이스에 설치된 것으로 보임
      - url: http://loki-gateway.argocd.svc.cluster.local/loki/api/v1/push