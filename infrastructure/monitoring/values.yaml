loki:
  deploymentMode: SingleBinary

  singleBinary:
    replicas: 1
    persistence:
      enabled: true
      storageClass: gp2   
      size: 10Gi

  read:
    replicas: 0
  write:
    replicas: 0
  backend:
    replicas: 0

  serviceAccount:
    create: false
    name: "loki-sa"

  loki:
    auth_enabled: false
    
    commonConfig:
      replication_factor: 1

    storage:
      type: 's3'
      bucketNames:
        chunks: "petclinic-loki-storage-20251229" 
        ruler:  "petclinic-loki-storage-20251229"
        admin:  "petclinic-loki-storage-20251229"
      s3:
        region: ap-northeast-2
        endpoint: https://s3.ap-northeast-2.amazonaws.com
    
    schemaConfig:
      configs:
        - from: 2024-01-01
          store: tsdb
          object_store: s3
          schema: v13
          index:
            prefix: index_
            period: 24h

promtail:
  config:
    clients:
      - url: http://loki-gateway.argocd.svc.cluster.local/loki/api/v1/push


tempo:
  # 1. 수신기(Receiver) 설정: Spring Boot가 보내는 데이터를 받을 문을 엽니다.
  receivers:
    zipkin:
      endpoint: "0.0.0.0:9411" # Zipkin 포트 개방 (필수!)
    otlp:
      protocols:
        grpc:
          endpoint: "0.0.0.0:4317"
        http:
          endpoint: "0.0.0.0:4318"

  # 2. 저장소 설정 (일단 테스트용으로 로컬 디스크 사용)
  # 나중에 S3로 바꿀 수 있습니다.
  persistence:
    enabled: true
    storageClass: gp2
    size: 10Gi

  # 3. 서비스 모니터 (프로메테우스 연동용)
  serviceMonitor:
    enabled: true